<!-- header.html -->
<header class="certificate-page">
    <div class="navbar-fixed">
        <nav>
            <div class="nav-wrapper">
                <a href="/certificates" class="brand-logo left" style="display: flex; align-items: center;">
                    <img src="/static/favicon.ico" alt="Logo" style="height: 32px; margin-right: 10px; margin-left: 10px;">
                    HomeLab Certificate Manager
                </a>
                <ul id="nav-mobile" class="right">
                    <li>
                        <a id="theme-switch" href="#" onclick="toggleTheme()" class="waves-effect waves-light">
                            <i class="material-icons">dark_mode</i>
                        </a>
                    </li>
                    <li>
                        <a id="profileButton" class="dropdown-trigger" href="#!" data-target="dropdown1">
                            Admin
                            <i class="material-icons right">arrow_drop_down</i>
                        </a>
                    </li>
                </ul>
            </div>
            {{ if .defaultPassword }}
            <div class="warning-banner" style="padding: 10px; text-align: center; line-height: 1.5em;">
                Warning: The default password is being used. Please change it in the <a href="/settings" class="text-important">settings</a>.
            </div>
            {{ end }}
        </nav>
    </div>

    <!-- Dropdown Structure -->
    <ul id="dropdown1" class="dropdown-content">
        <li><a href="/certificates" class="text-important">Certificate List</a></li>
        <li><a href="/settings" class="text-important">Settings</a></li>
        <li class="divider"></li>
        <li><a href="/logout" class="text-important">Logout</a></li>
    </ul>
</header>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize dropdowns
    var dropdowns = document.querySelectorAll('.dropdown-trigger');
    M.Dropdown.init(dropdowns, {
        constrainWidth: false,
        coverTrigger: false
    });

    // Set initial theme icon
    const theme = localStorage.getItem('theme') || 'light';
    const icon = document.querySelector('#theme-switch i');
    if (icon) {
        icon.textContent = theme === 'dark' ? 'light_mode' : 'dark_mode';
    }
});

function toggleTheme() {
    const currentTheme = localStorage.getItem('theme') || 'light';
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    applyTheme(newTheme);
}
</script>
